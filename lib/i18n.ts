import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import { getLocales } from 'expo-localization';
import AsyncStorage from '@react-native-async-storage/async-storage';
import 'intl-pluralrules';

const LANGUAGE_STORAGE_KEY = '@app_language';
const SUPPORTED_LANGUAGES = ['nb', 'en', 'de', 'fr', 'es', 'zh', 'pt'];

const resources = {
  nb: {
    translation: {
      "my_car": "Min bil",
      "color": "Farge",
      "fuel": "Drivstoff",
      "insurance": "Forsikring",
      "mileage": "Kilometerstand",
      "eu_control": "EU-kontroll",
      "wash": "Vask",
      "service": "Service",
      "tires": "Dekk",
      "vehicle_data_source": "Kjøretøydata fra Vegvesenet",
      "vehicle_data_subtitle": "EU-kontroll • Registreringsdata • Utslipp • Mål/vekt",
      "scan_receipt": "Skann kvittering",
      "scan_receipt_subtitle": "Registrer utgifter med AI",
      "welcome": "Velkommen!",
      "add_car": "Legg til bil",
      "add_car_desc": "Legg til bilen din for å komme i gang med vedlikeholdsoversikt",
      "not_registered": "Ikke registrert",
      "overdue": "Forfalt",
      "not_planned": "Ikke planlagt",
      "days_ago": "{{count}} dager siden",
      "weeks_ago": "{{count}} uker siden",
      "months_ago": "{{count}} mnd siden",
      "years_ago": "{{count}} år siden",
      "today": "I dag",
      "yesterday": "I går",
      "unknown": "Ukjent",
      "year_old": "{{count}} år gammel",
      "km_until": "{{value}} km til",
      "vegvesenet_mileage": "Vegvesenet: {{value}}",
      "back": "Tilbake",
      "settings": "Innstillinger",
      "insurance_documents": "Forsikringsdokumenter",
      "vehicle_info": "Kjøretøydata",
      "mileage_history": "Kilometerhistorikk",
      "overview": "Oversikt",
      "edit_car": "Rediger bil",
      "cancel": "Avbryt",
      "save": "Lagre",
      "vehicle_information": "Kjøretøyinformasjon",
      "make": "Merke",
      "model": "Modell",
      "year": "Årsmodell",
      "license_plate": "Registreringsnummer",
      "vin": "VIN / Understellsnummer",
      "maintenance_ops": "Drift og vedlikehold",
      "insurance_company": "Forsikringsselskap",
      "next_eu_control": "Neste EU-kontroll",
      "last_eu_control": "Sist godkjent (EU)",
      "actions": "Handling",
      "delete_car": "Slett bil",
      "app_data": "App & data",
      "app_version": "App versjon",
      "export_data": "Eksporter data",
      "download_copy": "Last ned en kopi",
      "support": "Support",
      "help_support": "Hjelp & Support",
      "contact_us": "Kontakt oss",
      "privacy_terms": "Personvern & Vilkår",
      "missing_info": "Mangler info",
      "missing_info_desc": "Bilmerke, modell og registreringsnummer er påkrevd.",
      "delete_car_confirm": "Er du sikker på at du vil slette {{car}}? Dette kan ikke angres.",
      "export_desc": "Denne funksjonen lar deg eksportere all bildata til en fil.",
      "help_desc": "Trenger du hjelp? Ta kontakt på haakon.foseide@gmail.com",
      "contact_desc": "E-post: haakon.foseide@gmail.com\\nTelefon: +47 412 89 330",
      "privacy_desc": "Personvern:\\nVi tar ditt personvern på alvor. All bildata og vedlikeholdsinformasjon lagres lokalt på enheten din. Vi samler ikke inn personlig informasjon utover det som er nødvendig for appens funksjonalitet.\\n\\nVilkår:\\nDenne appen tilbys som den er, uten noen form for garanti. Ved å bruke appen aksepterer du å ta fullt ansvar for all informasjon som registreres. Appens utvikler er ikke ansvarlig for eventuelle feil eller mangler i data.\\n\\nFor spørsmål, kontakt haakon.foseide@gmail.com",
      "language": "Språk",
      "information": "Informasjon",
      "view_edit_car_info": "Se og endre informasjon om bilen",
      "wash_history": "Vaskehistorikk",
      "service_history": "Servicehistorikk",
      "new_service": "Ny service",
      "new_wash": "Ny vask",
      "new_tire_set": "Nytt dekksett",
      "register_service": "Registrer service",
      "register_wash": "Registrer vask",
      "add_tire_set": "Legg til dekksett",
      "no_service_registered": "Ingen service registrert",
      "no_washes_yet": "Ingen vasker ennå",
      "no_tire_sets": "Ingen dekksett",
      "log_service_desc": "Logg service for å holde oversikt over vedlikehold",
      "track_wash_desc": "Hold oversikt over når bilen ble vasket",
      "add_tires_desc": "Legg til dekk for å holde oversikt",
      "summer_tires": "Sommerdekk",
      "winter_tires": "Vinterdekk",
      "history": "Historikk",
      "notifications": "Varslinger",
      "wash_reminder": "Påminnelse om vask",
      "wash_reminder_desc": "Varsle når det er på tide å vaske bilen",
      "eu_control_reminder": "EU-kontroll påminnelse",
      "eu_control_reminder_desc": "Varsle før EU-kontroll utløper",
      "service_reminder": "Service påminnelse",
      "service_reminder_desc": "Varsle når det er på tide med service",
      "mileage_reminder": "Kilometerstand påminnelse",
      "mileage_reminder_desc": "Påminn om å registrere ny kjørelengde",
      "tire_change_reminder": "Dekkskift påminnelse",
      "tire_change_reminder_desc": "Varsle når det er sesong for dekkskift",
      "fuel_reminder": "Drivstoff påminnelse",
      "fuel_reminder_desc": "Påminn om å registrere drivstoffylling",
      "freq_daily": "Daglig",
      "freq_weekly": "Ukentlig",
      "freq_biweekly": "Annenhver uke",
      "freq_monthly": "Månedlig",
      "freq_quarterly": "Kvartalsvis",
      "freq_custom_days": "Egendefinert (dager)",
      "freq_custom_km": "Egendefinert (km)",
      "select_frequency": "Velg frekvens",
      "custom_interval": "Egendefinert intervall",
      "value": "Verdi",
      "days": "Dager",
      "km": "Km",
      "every_x_days": "Hver {{count}} dag",
      "every_x_days_plural": "Hver {{count}}. dag",
      "every_x_km": "Hver {{value}} km",
      "invalid_value": "Ugyldig verdi",
      "enter_valid_number": "Vennligst skriv inn et gyldig tall",
      "enter_value": "Skriv inn verdi",
      "enter_number_prompt": "Skriv inn antall dager eller kilometer"
    }
  },
  en: {
    translation: {
      "my_car": "My Car",
      "color": "Color",
      "fuel": "Fuel",
      "insurance": "Insurance",
      "mileage": "Mileage",
      "eu_control": "EU Control",
      "wash": "Wash",
      "service": "Service",
      "tires": "Tires",
      "vehicle_data_source": "Vehicle Data from DMV",
      "vehicle_data_subtitle": "EU control • Registration • Emissions • Dimensions",
      "scan_receipt": "Scan Receipt",
      "scan_receipt_subtitle": "Register expenses with AI",
      "welcome": "Welcome!",
      "add_car": "Add Car",
      "add_car_desc": "Add your car to get started with maintenance tracking",
      "not_registered": "Not registered",
      "overdue": "Overdue",
      "not_planned": "Not planned",
      "days_ago": "{{count}} days ago",
      "weeks_ago": "{{count}} weeks ago",
      "months_ago": "{{count}} months ago",
      "years_ago": "{{count}} years ago",
      "today": "Today",
      "yesterday": "Yesterday",
      "unknown": "Unknown",
      "year_old": "{{count}} years old",
      "km_until": "{{value}} km until",
      "vegvesenet_mileage": "Registered: {{value}}",
      "back": "Back",
      "settings": "Settings",
      "insurance_documents": "Insurance Documents",
      "vehicle_info": "Vehicle Info",
      "mileage_history": "Mileage History",
      "overview": "Overview",
      "edit_car": "Edit Car",
      "cancel": "Cancel",
      "save": "Save",
      "vehicle_information": "Vehicle Information",
      "make": "Make",
      "model": "Model",
      "year": "Year",
      "license_plate": "License Plate",
      "vin": "VIN",
      "maintenance_ops": "Operation & Maintenance",
      "insurance_company": "Insurance Company",
      "next_eu_control": "Next EU Control",
      "last_eu_control": "Last Approved (EU)",
      "actions": "Actions",
      "delete_car": "Delete Car",
      "app_data": "App & Data",
      "app_version": "App Version",
      "export_data": "Export Data",
      "download_copy": "Download a copy",
      "support": "Support",
      "help_support": "Help & Support",
      "contact_us": "Contact Us",
      "privacy_terms": "Privacy & Terms",
      "missing_info": "Missing Info",
      "missing_info_desc": "Make, model and license plate are required.",
      "delete_car_confirm": "Are you sure you want to delete {{car}}? This cannot be undone.",
      "export_desc": "This feature allows you to export all car data to a file.",
      "help_desc": "Need help? Contact at haakon.foseide@gmail.com",
      "contact_desc": "Email: haakon.foseide@gmail.com\\nPhone: +47 412 89 330",
      "privacy_desc": "Privacy:\\nWe take your privacy seriously. All car data is stored locally on your device.\\n\\nTerms:\\nThis app is provided as is, without warranty. By using the app you accept full responsibility for all information registered.\\n\\nFor questions, contact haakon.foseide@gmail.com",
      "language": "Language",
      "information": "Information",
      "view_edit_car_info": "View and edit car information",
      "wash_history": "Wash History",
      "service_history": "Service History",
      "new_service": "New Service",
      "new_wash": "New Wash",
      "new_tire_set": "New Tire Set",
      "register_service": "Register Service",
      "register_wash": "Register Wash",
      "add_tire_set": "Add Tire Set",
      "no_service_registered": "No service registered",
      "no_washes_yet": "No washes yet",
      "no_tire_sets": "No tire sets",
      "log_service_desc": "Log service to track maintenance",
      "track_wash_desc": "Keep track of when the car was washed",
      "add_tires_desc": "Add tires to keep track",
      "summer_tires": "Summer Tires",
      "winter_tires": "Winter Tires",
      "history": "History",
      "notifications": "Notifications",
      "wash_reminder": "Wash reminder",
      "wash_reminder_desc": "Notify when it's time to wash the car",
      "eu_control_reminder": "EU control reminder",
      "eu_control_reminder_desc": "Notify before EU control expires",
      "service_reminder": "Service reminder",
      "service_reminder_desc": "Notify when it's time for service",
      "mileage_reminder": "Mileage reminder",
      "mileage_reminder_desc": "Remind to register new mileage",
      "tire_change_reminder": "Tire change reminder",
      "tire_change_reminder_desc": "Notify when it's season for tire change",
      "fuel_reminder": "Fuel reminder",
      "fuel_reminder_desc": "Remind to register fuel refills",
      "freq_daily": "Daily",
      "freq_weekly": "Weekly",
      "freq_biweekly": "Biweekly",
      "freq_monthly": "Monthly",
      "freq_quarterly": "Quarterly",
      "freq_custom_days": "Custom (days)",
      "freq_custom_km": "Custom (km)",
      "select_frequency": "Select frequency",
      "custom_interval": "Custom interval",
      "value": "Value",
      "days": "Days",
      "km": "Km",
      "every_x_days": "Every {{count}} day",
      "every_x_days_plural": "Every {{count}} days",
      "every_x_km": "Every {{value}} km",
      "invalid_value": "Invalid value",
      "enter_valid_number": "Please enter a valid number",
      "enter_value": "Enter value",
      "enter_number_prompt": "Enter the number of days or kilometers"
    }
  },
  es: {
    translation: {
      "my_car": "Mi Auto",
      "color": "Color",
      "fuel": "Combustible",
      "insurance": "Seguro",
      "mileage": "Kilometraje",
      "eu_control": "Control UE",
      "wash": "Lavado",
      "service": "Servicio",
      "tires": "Neumáticos",
      "vehicle_data_source": "Datos del Vehículo",
      "vehicle_data_subtitle": "Control UE • Registro • Emisiones • Dimensiones",
      "scan_receipt": "Escanear Recibo",
      "scan_receipt_subtitle": "Registrar gastos con IA",
      "welcome": "¡Bienvenido!",
      "add_car": "Añadir Auto",
      "add_car_desc": "Añade tu auto para comenzar el seguimiento de mantenimiento",
      "not_registered": "No registrado",
      "overdue": "Vencido",
      "not_planned": "No planeado",
      "days_ago": "Hace {{count}} días",
      "weeks_ago": "Hace {{count}} semanas",
      "months_ago": "Hace {{count}} meses",
      "years_ago": "Hace {{count}} años",
      "today": "Hoy",
      "yesterday": "Ayer",
      "unknown": "Desconocido",
      "year_old": "{{count}} años",
      "km_until": "{{value}} km para",
      "vegvesenet_mileage": "Registrado: {{value}}",
      "back": "Atrás",
      "settings": "Ajustes",
      "insurance_documents": "Documentos de Seguro",
      "vehicle_info": "Info del Vehículo",
      "mileage_history": "Historial de Kilometraje",
      "overview": "Resumen",
      "edit_car": "Editar Auto",
      "cancel": "Cancelar",
      "save": "Guardar",
      "vehicle_information": "Información del Vehículo",
      "make": "Marca",
      "model": "Modelo",
      "year": "Año",
      "license_plate": "Matrícula",
      "vin": "VIN",
      "maintenance_ops": "Operación y Mantenimiento",
      "insurance_company": "Compañía de Seguros",
      "next_eu_control": "Próximo Control UE",
      "last_eu_control": "Último Aprobado (UE)",
      "actions": "Acciones",
      "delete_car": "Eliminar Auto",
      "app_data": "App y Datos",
      "app_version": "Versión de App",
      "export_data": "Exportar Datos",
      "download_copy": "Descargar una copia",
      "support": "Soporte",
      "help_support": "Ayuda y Soporte",
      "contact_us": "Contáctanos",
      "privacy_terms": "Privacidad y Términos",
      "missing_info": "Falta Info",
      "missing_info_desc": "Marca, modelo y matrícula son obligatorios.",
      "delete_car_confirm": "¿Seguro que quieres eliminar {{car}}? No se puede deshacer.",
      "export_desc": "Esta función permite exportar todos los datos del auto a un archivo.",
      "help_desc": "¿Necesitas ayuda? Contacta a haakon.foseide@gmail.com",
      "contact_desc": "Email: haakon.foseide@gmail.com\\nTeléfono: +47 412 89 330",
      "privacy_desc": "Privacidad:\\nTomamos tu privacidad en serio. Todos los datos se guardan localmente.\\n\\nTérminos:\\nEsta app se ofrece tal cual, sin garantía.",
      "language": "Idioma",
      "information": "Información",
      "view_edit_car_info": "Ver y editar información del auto",
      "wash_history": "Historial de Lavado",
      "service_history": "Historial de Servicio",
      "new_service": "Nuevo Servicio",
      "new_wash": "Nuevo Lavado",
      "new_tire_set": "Nuevo Set de Neumáticos",
      "register_service": "Registrar Servicio",
      "register_wash": "Registrar Lavado",
      "add_tire_set": "Añadir Set de Neumáticos",
      "no_service_registered": "Sin servicio registrado",
      "no_washes_yet": "Sin lavados aún",
      "no_tire_sets": "Sin sets de neumáticos",
      "log_service_desc": "Registra el servicio para seguir el mantenimiento",
      "track_wash_desc": "Lleva un registro de cuándo se lavó el auto",
      "add_tires_desc": "Añade neumáticos para llevar el registro",
      "summer_tires": "Neumáticos de Verano",
      "winter_tires": "Neumáticos de Invierno",
      "history": "Historial",
      "notifications": "Notificaciones",
      "wash_reminder": "Recordatorio de lavado",
      "wash_reminder_desc": "Avisar cuando es hora de lavar el auto",
      "eu_control_reminder": "Recordatorio de control",
      "eu_control_reminder_desc": "Avisar antes de que venza el control",
      "service_reminder": "Recordatorio de servicio",
      "service_reminder_desc": "Avisar cuando es hora del servicio",
      "mileage_reminder": "Recordatorio de kilometraje",
      "mileage_reminder_desc": "Recordar registrar nuevo kilometraje",
      "tire_change_reminder": "Recordatorio de cambio de neumáticos",
      "tire_change_reminder_desc": "Avisar cuando es temporada de cambio",
      "fuel_reminder": "Recordatorio de combustible",
      "fuel_reminder_desc": "Recordar registrar repostaje",
      "freq_daily": "Diario",
      "freq_weekly": "Semanal",
      "freq_biweekly": "Quincenal",
      "freq_monthly": "Mensual",
      "freq_quarterly": "Trimestral",
      "freq_custom_days": "Personalizado (días)",
      "freq_custom_km": "Personalizado (km)",
      "select_frequency": "Seleccionar frecuencia",
      "custom_interval": "Intervalo personalizado",
      "value": "Valor",
      "days": "Días",
      "km": "Km",
      "every_x_days": "Cada {{count}} día",
      "every_x_days_plural": "Cada {{count}} días",
      "every_x_km": "Cada {{value}} km",
      "invalid_value": "Valor inválido",
      "enter_valid_number": "Por favor ingrese un número válido",
      "enter_value": "Ingresar valor",
      "enter_number_prompt": "Ingrese el número de días o kilómetros"
    }
  },
  fr: {
    translation: {
      "my_car": "Ma Voiture",
      "color": "Couleur",
      "fuel": "Carburant",
      "insurance": "Assurance",
      "mileage": "Kilométrage",
      "eu_control": "Contrôle Technique",
      "wash": "Lavage",
      "service": "Service",
      "tires": "Pneus",
      "vehicle_data_source": "Données du Véhicule",
      "vehicle_data_subtitle": "Contrôle technique • Immatriculation • Émissions",
      "scan_receipt": "Scanner Reçu",
      "scan_receipt_subtitle": "Enregistrer les dépenses avec l'IA",
      "welcome": "Bienvenue !",
      "add_car": "Ajouter Voiture",
      "add_car_desc": "Ajoutez votre voiture pour commencer le suivi",
      "not_registered": "Non enregistré",
      "overdue": "En retard",
      "not_planned": "Non planifié",
      "days_ago": "Il y a {{count}} jours",
      "weeks_ago": "Il y a {{count}} semaines",
      "months_ago": "Il y a {{count}} mois",
      "years_ago": "Il y a {{count}} ans",
      "today": "Aujourd'hui",
      "yesterday": "Hier",
      "unknown": "Inconnu",
      "year_old": "{{count}} ans",
      "km_until": "{{value}} km avant",
      "vegvesenet_mileage": "Enregistré: {{value}}",
      "back": "Retour",
      "settings": "Paramètres",
      "insurance_documents": "Documents d'assurance",
      "vehicle_info": "Info Véhicule",
      "mileage_history": "Historique du Kilométrage",
      "overview": "Aperçu",
      "edit_car": "Modifier Voiture",
      "cancel": "Annuler",
      "save": "Enregistrer",
      "vehicle_information": "Informations Véhicule",
      "make": "Marque",
      "model": "Modèle",
      "year": "Année",
      "license_plate": "Immatriculation",
      "vin": "VIN",
      "maintenance_ops": "Entretien",
      "insurance_company": "Compagnie d'assurance",
      "next_eu_control": "Prochain CT",
      "last_eu_control": "Dernier CT",
      "actions": "Actions",
      "delete_car": "Supprimer Voiture",
      "app_data": "App & Données",
      "app_version": "Version App",
      "export_data": "Exporter Données",
      "download_copy": "Télécharger une copie",
      "support": "Support",
      "help_support": "Aide & Support",
      "contact_us": "Nous contacter",
      "privacy_terms": "Confidentialité & Conditions",
      "missing_info": "Info manquante",
      "missing_info_desc": "Marque, modèle et immatriculation requis.",
      "delete_car_confirm": "Voulez-vous vraiment supprimer {{car}} ? Irréversible.",
      "export_desc": "Exportez toutes les données de la voiture vers un fichier.",
      "help_desc": "Besoin d'aide ? Contactez haakon.foseide@gmail.com",
      "contact_desc": "Email: haakon.foseide@gmail.com\\nTéléphone: +47 412 89 330",
      "privacy_desc": "Confidentialité:\\nVos données sont stockées localement.\\n\\nConditions:\\nApp fournie telle quelle, sans garantie.",
      "language": "Langue",
      "information": "Informations",
      "view_edit_car_info": "Voir et modifier les informations du véhicule",
      "wash_history": "Historique de Lavage",
      "service_history": "Historique de Service",
      "new_service": "Nouveau Service",
      "new_wash": "Nouveau Lavage",
      "new_tire_set": "Nouveau Jeu de Pneus",
      "register_service": "Enregistrer Service",
      "register_wash": "Enregistrer Lavage",
      "add_tire_set": "Ajouter Jeu de Pneus",
      "no_service_registered": "Aucun service enregistré",
      "no_washes_yet": "Pas encore de lavages",
      "no_tire_sets": "Aucun jeu de pneus",
      "log_service_desc": "Enregistrez le service pour suivre l'entretien",
      "track_wash_desc": "Gardez une trace des lavages",
      "add_tires_desc": "Ajoutez des pneus pour suivre",
      "summer_tires": "Pneus d'Été",
      "winter_tires": "Pneus d'Hiver",
      "history": "Historique",
      "notifications": "Notifications",
      "wash_reminder": "Rappel de lavage",
      "wash_reminder_desc": "Alerter quand il est temps de laver",
      "eu_control_reminder": "Rappel de contrôle technique",
      "eu_control_reminder_desc": "Alerter avant l'expiration du CT",
      "service_reminder": "Rappel de service",
      "service_reminder_desc": "Alerter quand il est temps du service",
      "mileage_reminder": "Rappel de kilométrage",
      "mileage_reminder_desc": "Rappeler d'enregistrer le kilométrage",
      "tire_change_reminder": "Rappel de changement de pneus",
      "tire_change_reminder_desc": "Alerter quand c'est la saison",
      "fuel_reminder": "Rappel de carburant",
      "fuel_reminder_desc": "Rappeler d'enregistrer le plein",
      "freq_daily": "Quotidien",
      "freq_weekly": "Hebdomadaire",
      "freq_biweekly": "Bimensuel",
      "freq_monthly": "Mensuel",
      "freq_quarterly": "Trimestriel",
      "freq_custom_days": "Personnalisé (jours)",
      "freq_custom_km": "Personnalisé (km)",
      "select_frequency": "Sélectionner la fréquence",
      "custom_interval": "Intervalle personnalisé",
      "value": "Valeur",
      "days": "Jours",
      "km": "Km",
      "every_x_days": "Tous les {{count}} jour",
      "every_x_days_plural": "Tous les {{count}} jours",
      "every_x_km": "Tous les {{value}} km",
      "invalid_value": "Valeur invalide",
      "enter_valid_number": "Veuillez entrer un nombre valide",
      "enter_value": "Entrer la valeur",
      "enter_number_prompt": "Entrez le nombre de jours ou kilomètres"
    }
  },
  de: {
    translation: {
      "my_car": "Mein Auto",
      "color": "Farbe",
      "fuel": "Kraftstoff",
      "insurance": "Versicherung",
      "mileage": "Kilometerstand",
      "eu_control": "TÜV / Überprüfung",
      "wash": "Wäsche",
      "service": "Service",
      "tires": "Reifen",
      "vehicle_data_source": "Fahrzeugdaten",
      "vehicle_data_subtitle": "TÜV • Zulassung • Emissionen • Maße",
      "scan_receipt": "Beleg scannen",
      "scan_receipt_subtitle": "Ausgaben mit KI erfassen",
      "welcome": "Willkommen!",
      "add_car": "Auto hinzufügen",
      "add_car_desc": "Fügen Sie Ihr Auto hinzu, um die Wartung zu verfolgen",
      "not_registered": "Nicht registriert",
      "overdue": "Überfällig",
      "not_planned": "Nicht geplant",
      "days_ago": "Vor {{count}} Tagen",
      "weeks_ago": "Vor {{count}} Wochen",
      "months_ago": "Vor {{count}} Monaten",
      "years_ago": "Vor {{count}} Jahren",
      "today": "Heute",
      "yesterday": "Gestern",
      "unknown": "Unbekannt",
      "year_old": "{{count}} Jahre alt",
      "km_until": "Noch {{value}} km",
      "vegvesenet_mileage": "Registriert: {{value}}",
      "back": "Zurück",
      "settings": "Einstellungen",
      "insurance_documents": "Versicherungsunterlagen",
      "vehicle_info": "Fahrzeuginfo",
      "mileage_history": "Kilometerhistorie",
      "overview": "Übersicht",
      "edit_car": "Auto bearbeiten",
      "cancel": "Abbrechen",
      "save": "Speichern",
      "vehicle_information": "Fahrzeuginformationen",
      "make": "Marke",
      "model": "Modell",
      "year": "Jahr",
      "license_plate": "Kennzeichen",
      "vin": "VIN",
      "maintenance_ops": "Betrieb & Wartung",
      "insurance_company": "Versicherungsgesellschaft",
      "next_eu_control": "Nächster TÜV",
      "last_eu_control": "Letzter TÜV",
      "actions": "Aktionen",
      "delete_car": "Auto löschen",
      "app_data": "App & Daten",
      "app_version": "App Version",
      "export_data": "Daten exportieren",
      "download_copy": "Kopie herunterladen",
      "support": "Support",
      "help_support": "Hilfe & Support",
      "contact_us": "Kontakt",
      "privacy_terms": "Datenschutz & Bedingungen",
      "missing_info": "Fehlende Info",
      "missing_info_desc": "Marke, Modell und Kennzeichen sind erforderlich.",
      "delete_car_confirm": "Möchten Sie {{car}} wirklich löschen? Dies kann nicht rückgängig gemacht werden.",
      "export_desc": "Exportieren Sie alle Fahrzeugdaten in eine Datei.",
      "help_desc": "Hilfe benötigt? Kontaktieren Sie haakon.foseide@gmail.com",
      "contact_desc": "E-Mail: haakon.foseide@gmail.com\\nTelefon: +47 412 89 330",
      "privacy_desc": "Datenschutz:\\nWir nehmen Datenschutz ernst. Alle Daten werden lokal gespeichert.\\n\\nBedingungen:\\nApp wird ohne Gewähr bereitgestellt.",
      "language": "Sprache",
      "information": "Informationen",
      "view_edit_car_info": "Fahrzeuginformationen anzeigen und bearbeiten",
      "wash_history": "Waschhistorie",
      "service_history": "Servicehistorie",
      "new_service": "Neuer Service",
      "new_wash": "Neue Wäsche",
      "new_tire_set": "Neuer Reifensatz",
      "register_service": "Service registrieren",
      "register_wash": "Wäsche registrieren",
      "add_tire_set": "Reifensatz hinzufügen",
      "no_service_registered": "Kein Service registriert",
      "no_washes_yet": "Noch keine Wäschen",
      "no_tire_sets": "Keine Reifensätze",
      "log_service_desc": "Service protokollieren für Wartungsübersicht",
      "track_wash_desc": "Verfolgen Sie wann das Auto gewaschen wurde",
      "add_tires_desc": "Reifen hinzufügen zur Übersicht",
      "summer_tires": "Sommerreifen",
      "winter_tires": "Winterreifen",
      "history": "Historie",
      "notifications": "Benachrichtigungen",
      "wash_reminder": "Wascherinnerung",
      "wash_reminder_desc": "Benachrichtigen wenn Wäsche fällig ist",
      "eu_control_reminder": "TÜV Erinnerung",
      "eu_control_reminder_desc": "Vor Ablauf des TÜV benachrichtigen",
      "service_reminder": "Service Erinnerung",
      "service_reminder_desc": "Benachrichtigen wenn Service fällig ist",
      "mileage_reminder": "Kilometerstand Erinnerung",
      "mileage_reminder_desc": "An Kilometerstand erinnern",
      "tire_change_reminder": "Reifenwechsel Erinnerung",
      "tire_change_reminder_desc": "Zur Reifenwechsel-Saison erinnern",
      "fuel_reminder": "Tanken Erinnerung",
      "fuel_reminder_desc": "An Tankvorgang erinnern",
      "freq_daily": "Täglich",
      "freq_weekly": "Wöchentlich",
      "freq_biweekly": "Zweiwöchentlich",
      "freq_monthly": "Monatlich",
      "freq_quarterly": "Vierteljährlich",
      "freq_custom_days": "Benutzerdefiniert (Tage)",
      "freq_custom_km": "Benutzerdefiniert (km)",
      "select_frequency": "Frequenz auswählen",
      "custom_interval": "Benutzerdefiniertes Intervall",
      "value": "Wert",
      "days": "Tage",
      "km": "Km",
      "every_x_days": "Alle {{count}} Tag",
      "every_x_days_plural": "Alle {{count}} Tage",
      "every_x_km": "Alle {{value}} km",
      "invalid_value": "Ungültiger Wert",
      "enter_valid_number": "Bitte geben Sie eine gültige Zahl ein",
      "enter_value": "Wert eingeben",
      "enter_number_prompt": "Geben Sie die Anzahl der Tage oder Kilometer ein"
    }
  },
  zh: {
    translation: {
      "my_car": "我的车",
      "color": "颜色",
      "fuel": "燃料",
      "insurance": "保险",
      "mileage": "里程",
      "eu_control": "欧盟检查",
      "wash": "洗车",
      "service": "保养",
      "tires": "轮胎",
      "vehicle_data_source": "车辆数据",
      "vehicle_data_subtitle": "检查 • 注册 • 排放 • 尺寸",
      "scan_receipt": "扫描收据",
      "scan_receipt_subtitle": "使用 AI 记录支出",
      "welcome": "欢迎！",
      "add_car": "添加车辆",
      "add_car_desc": "添加您的车辆以开始跟踪维护情况",
      "not_registered": "未注册",
      "overdue": "逾期",
      "not_planned": "未计划",
      "days_ago": "{{count}} 天前",
      "weeks_ago": "{{count}} 周前",
      "months_ago": "{{count}} 个月前",
      "years_ago": "{{count}} 年前",
      "today": "今天",
      "yesterday": "昨天",
      "unknown": "未知",
      "year_old": "{{count}} 岁",
      "km_until": "还剩 {{value}} 公里",
      "vegvesenet_mileage": "注册里程: {{value}}",
      "back": "返回",
      "settings": "设置",
      "insurance_documents": "保险文件",
      "vehicle_info": "车辆信息",
      "mileage_history": "里程历史",
      "overview": "概览",
      "edit_car": "编辑车辆",
      "cancel": "取消",
      "save": "保存",
      "vehicle_information": "车辆信息",
      "make": "品牌",
      "model": "型号",
      "year": "年份",
      "license_plate": "车牌号",
      "vin": "VIN",
      "maintenance_ops": "运营与维护",
      "insurance_company": "保险公司",
      "next_eu_control": "下次检查",
      "last_eu_control": "上次通过",
      "actions": "操作",
      "delete_car": "删除车辆",
      "app_data": "应用与数据",
      "app_version": "应用版本",
      "export_data": "导出数据",
      "download_copy": "下载副本",
      "support": "支持",
      "help_support": "帮助与支持",
      "contact_us": "联系我们",
      "privacy_terms": "隐私与条款",
      "missing_info": "缺少信息",
      "missing_info_desc": "品牌、型号和车牌号是必填项。",
      "delete_car_confirm": "您确定要删除 {{car}} 吗？此操作无法撤销。",
      "export_desc": "此功能允许您将所有车辆数据导出到文件。",
      "help_desc": "需要帮助？请联系 haakon.foseide@gmail.com",
      "contact_desc": "邮箱: haakon.foseide@gmail.com\\n电话: +47 412 89 330",
      "privacy_desc": "隐私:\\n我们要保护您的隐私。所有数据均存储在本地。\\n\\n条款:\\n按原样提供，不提供担保。",
      "language": "语言",
      "information": "信息",
      "view_edit_car_info": "查看和编辑车辆信息",
      "wash_history": "洗车历史",
      "service_history": "保养历史",
      "new_service": "新保养",
      "new_wash": "新洗车",
      "new_tire_set": "新轮胎套装",
      "register_service": "记录保养",
      "register_wash": "记录洗车",
      "add_tire_set": "添加轮胎套装",
      "no_service_registered": "未注册保养",
      "no_washes_yet": "还没有洗车记录",
      "no_tire_sets": "没有轮胎套装",
      "log_service_desc": "记录保养以跟踪维护",
      "track_wash_desc": "跟踪洗车时间",
      "add_tires_desc": "添加轮胎以跟踪",
      "summer_tires": "夏季轮胎",
      "winter_tires": "冬季轮胎",
      "history": "历史",
      "notifications": "通知",
      "wash_reminder": "洗车提醒",
      "wash_reminder_desc": "提醒该洗车了",
      "eu_control_reminder": "年检提醒",
      "eu_control_reminder_desc": "年检到期前提醒",
      "service_reminder": "保养提醒",
      "service_reminder_desc": "提醒该保养了",
      "mileage_reminder": "里程提醒",
      "mileage_reminder_desc": "提醒记录新里程",
      "tire_change_reminder": "换胎提醒",
      "tire_change_reminder_desc": "换胎季节提醒",
      "fuel_reminder": "加油提醒",
      "fuel_reminder_desc": "提醒记录加油",
      "freq_daily": "每天",
      "freq_weekly": "每周",
      "freq_biweekly": "每两周",
      "freq_monthly": "每月",
      "freq_quarterly": "每季度",
      "freq_custom_days": "自定义（天）",
      "freq_custom_km": "自定义（公里）",
      "select_frequency": "选择频率",
      "custom_interval": "自定义间隔",
      "value": "数值",
      "days": "天",
      "km": "公里",
      "every_x_days": "每 {{count}} 天",
      "every_x_days_plural": "每 {{count}} 天",
      "every_x_km": "每 {{value}} 公里",
      "invalid_value": "无效数值",
      "enter_valid_number": "请输入有效数字",
      "enter_value": "输入数值",
      "enter_number_prompt": "输入天数或公里数"
    }
  },
  pt: {
    translation: {
      "my_car": "Meu Carro",
      "color": "Cor",
      "fuel": "Combustível",
      "insurance": "Seguro",
      "mileage": "Quilometragem",
      "eu_control": "Inspeção",
      "wash": "Lavagem",
      "service": "Serviço",
      "tires": "Pneus",
      "vehicle_data_source": "Dados do Veículo",
      "vehicle_data_subtitle": "Inspeção • Registro • Emissões • Dimensões",
      "scan_receipt": "Digitalizar Recibo",
      "scan_receipt_subtitle": "Registrar despesas com IA",
      "welcome": "Bem-vindo!",
      "add_car": "Adicionar Carro",
      "add_car_desc": "Adicione seu carro para começar a acompanhar a manutenção",
      "not_registered": "Não registrado",
      "overdue": "Atrasado",
      "not_planned": "Não planejado",
      "days_ago": "Há {{count}} dias",
      "weeks_ago": "Há {{count}} semanas",
      "months_ago": "Há {{count}} meses",
      "years_ago": "Há {{count}} anos",
      "today": "Hoje",
      "yesterday": "Ontem",
      "unknown": "Desconhecido",
      "year_old": "{{count}} anos",
      "km_until": "{{value}} km restantes",
      "vegvesenet_mileage": "Registrado: {{value}}",
      "back": "Voltar",
      "settings": "Configurações",
      "insurance_documents": "Documentos de Seguro",
      "vehicle_info": "Info do Veículo",
      "mileage_history": "Histórico de Quilometragem",
      "overview": "Visão Geral",
      "edit_car": "Editar Carro",
      "cancel": "Cancelar",
      "save": "Salvar",
      "vehicle_information": "Informações do Veículo",
      "make": "Marca",
      "model": "Modelo",
      "year": "Ano",
      "license_plate": "Placa",
      "vin": "VIN",
      "maintenance_ops": "Operação e Manutenção",
      "insurance_company": "Seguradora",
      "next_eu_control": "Próxima Inspeção",
      "last_eu_control": "Última Aprovada",
      "actions": "Ações",
      "delete_car": "Excluir Carro",
      "app_data": "App e Dados",
      "app_version": "Versão do App",
      "export_data": "Exportar Dados",
      "download_copy": "Baixar cópia",
      "support": "Suporte",
      "help_support": "Ajuda e Suporte",
      "contact_us": "Contate-nos",
      "privacy_terms": "Privacidade e Termos",
      "missing_info": "Info Faltando",
      "missing_info_desc": "Marca, modelo e placa são obrigatórios.",
      "delete_car_confirm": "Tem certeza que deseja excluir {{car}}? Isso não pode ser desfeito.",
      "export_desc": "Este recurso permite exportar todos os dados do carro para um arquivo.",
      "help_desc": "Precisa de ajuda? Contate haakon.foseide@gmail.com",
      "contact_desc": "Email: haakon.foseide@gmail.com\\nTelefone: +47 412 89 330",
      "privacy_desc": "Privacidade:\\nLevamos sua privacidade a sério. Todos os dados são armazenados localmente.\\n\\nTermos:\\nEste app é fornecido como está, sem garantia.",
      "language": "Idioma",
      "information": "Informação",
      "view_edit_car_info": "Ver e editar informações do veículo",
      "wash_history": "Histórico de Lavagem",
      "service_history": "Histórico de Serviço",
      "new_service": "Novo Serviço",
      "new_wash": "Nova Lavagem",
      "new_tire_set": "Novo Conjunto de Pneus",
      "register_service": "Registrar Serviço",
      "register_wash": "Registrar Lavagem",
      "add_tire_set": "Adicionar Conjunto de Pneus",
      "no_service_registered": "Nenhum serviço registrado",
      "no_washes_yet": "Nenhuma lavagem ainda",
      "no_tire_sets": "Sem conjuntos de pneus",
      "log_service_desc": "Registre serviço para acompanhar manutenção",
      "track_wash_desc": "Acompanhe quando o carro foi lavado",
      "add_tires_desc": "Adicione pneus para acompanhar",
      "summer_tires": "Pneus de Verão",
      "winter_tires": "Pneus de Inverno",
      "history": "Histórico",
      "notifications": "Notificações",
      "wash_reminder": "Lembrete de lavagem",
      "wash_reminder_desc": "Avisar quando é hora de lavar",
      "eu_control_reminder": "Lembrete de inspeção",
      "eu_control_reminder_desc": "Avisar antes da inspeção vencer",
      "service_reminder": "Lembrete de serviço",
      "service_reminder_desc": "Avisar quando é hora do serviço",
      "mileage_reminder": "Lembrete de quilometragem",
      "mileage_reminder_desc": "Lembrar de registrar quilometragem",
      "tire_change_reminder": "Lembrete de troca de pneus",
      "tire_change_reminder_desc": "Avisar na temporada de troca",
      "fuel_reminder": "Lembrete de combustível",
      "fuel_reminder_desc": "Lembrar de registrar abastecimento",
      "freq_daily": "Diário",
      "freq_weekly": "Semanal",
      "freq_biweekly": "Quinzenal",
      "freq_monthly": "Mensal",
      "freq_quarterly": "Trimestral",
      "freq_custom_days": "Personalizado (dias)",
      "freq_custom_km": "Personalizado (km)",
      "select_frequency": "Selecionar frequência",
      "custom_interval": "Intervalo personalizado",
      "value": "Valor",
      "days": "Dias",
      "km": "Km",
      "every_x_days": "A cada {{count}} dia",
      "every_x_days_plural": "A cada {{count}} dias",
      "every_x_km": "A cada {{value}} km",
      "invalid_value": "Valor inválido",
      "enter_valid_number": "Por favor insira um número válido",
      "enter_value": "Inserir valor",
      "enter_number_prompt": "Insira o número de dias ou quilômetros"
    }
  }
};

const locales = getLocales();
const deviceLanguage = locales?.[0]?.languageCode ?? 'en';

const getInitialLanguage = (): string => {
  if (SUPPORTED_LANGUAGES.includes(deviceLanguage)) {
    return deviceLanguage;
  }
  return 'en';
};

i18n
  .use(initReactI18next)
  .init({
    resources,
    lng: getInitialLanguage(),
    fallbackLng: 'en',
    compatibilityJSON: 'v4',
    interpolation: {
      escapeValue: false
    }
  });

const loadStoredLanguage = async () => {
  try {
    const storedLang = await AsyncStorage.getItem(LANGUAGE_STORAGE_KEY);
    if (storedLang && SUPPORTED_LANGUAGES.includes(storedLang)) {
      await i18n.changeLanguage(storedLang);
      console.log('[i18n] Loaded stored language:', storedLang);
    } else {
      console.log('[i18n] Using device/default language:', i18n.language);
    }
  } catch (error) {
    console.error('[i18n] Failed to load stored language:', error);
  }
};

loadStoredLanguage();

export default i18n;
